<ion-header>
  <ion-navbar  hideBackButton="true" primary>
    <ion-title text-center>Sign up</ion-title>
    <ion-buttons end>
      <button ion-button icon-right color="light" (click)="dashboardPage()">SKIP<ion-icon name="ios-arrow-forward"></ion-icon></button>
   </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
    <div padding-bottom>
      <ion-segment [(ngModel)]="step">
        <ion-segment-button value="step1">
          Step 1
        </ion-segment-button>
        <ion-segment-button value="step2">
          Step 2
        </ion-segment-button>
        <ion-segment-button value="step3">
          Step 3
        </ion-segment-button>
        <ion-segment-button value="step4" [hidden]="isUserSelected">
          Step 4
        </ion-segment-button>
      </ion-segment>
    </div>

  <!--Step1-->
  <div [ngSwitch]="step">
    <ion-list *ngSwitchCase="'step1'">
        <ion-grid class="center">
            <div ion-text text-center padding-bottom>
              <h1>Sign up as...</h1>
              <em>Step 1: Signup as a user or handy</em>
            </div>
            <ion-row style="height:30%;">
              <ion-col><button ion-button block (click)="signupAsUser()">User</button></ion-col>
              <ion-col><button ion-button block (click)="signupAsHandy()">Handy</button></ion-col>
            </ion-row>
            <div padding-top style="position:absolute;bottom:0;width:95%;text-align:center;">
                <div text-center ion-text>Already have an account?</div>
                <button ion-button block round color="primary" (click)="loginPage();">Login Here</button>
            </div>
          </ion-grid>
    </ion-list>
  </div>
  
  <!--Step2-->
  <div [ngSwitch]="step">
  <!--novalidate - to stop browser's native validation -->
  <form *ngSwitchCase="'step2'" novalidate [formGroup]="signupForm">
    <ion-list no-lines>
      <div ion-text text-center padding-bottom>
        <h1>Create an account</h1>
        <em>Step 2: Please fill in your account details.</em>
      </div>
      <ion-item>
        <ion-input type="email" [(ngModel)]="account.email" name="email" required formControlName="username" placeholder="Email"></ion-input>
      </ion-item>
      <span *ngIf="!signupForm.controls.username.valid && (signupForm.controls.username.dirty || submitAttempt)" class="help-block text-danger">
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.username.errors?.email && !signupForm.controls.username.errors?.required">
          * Incorrect email format.
        </div>
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.username.errors?.required">
          * Email is required.
        </div>
      </span>
      
      <ion-item>
        <ion-input type="text" [(ngModel)]="account.fName" name="fName" required formControlName="fName" placeholder="First Name"></ion-input>
      </ion-item>
      <span *ngIf="!signupForm.controls.fName.valid && (signupForm.controls.fName.dirty || submitAttempt)">
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.fName.errors?.pattern">
          * First name can only contain letters.
        </div>
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.fName.errors?.required">
          * First name is required.
        </div>
      </span>

      <ion-item>
        <ion-input type="text" [(ngModel)]="account.lName" placeholder="Last Name" required formControlName="lName" name="lName"></ion-input>
      </ion-item>
      <span *ngIf="!signupForm.controls.lName.valid && (signupForm.controls.lName.dirty || submitAttempt)">
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.lName.errors?.pattern">
          * Last name can only contain letters.
        </div>
        <div ion-text class="warning-msg" *ngIf="signupForm.controls.lName.errors?.required">
          * Last name is required.
        </div>
      </span>

      <div formGroupName="passwords">
        <ion-item>
          <ion-input type="password" [(ngModel)]="account.password" placeholder="Password" required formControlName="password" name="password"></ion-input>
        </ion-item>
        <span *ngIf="!signupForm.controls.passwords.valid && (signupForm.controls.passwords.dirty || submitAttempt)">
          <div ion-text class="warning-msg" *ngIf="!this.signupForm.get('passwords.password').valid">
            * Password must be at least 6 characters long.
          </div>
        </span>
        
        <ion-item>
          <ion-input type="password" [(ngModel)]="account.cfmPassword" placeholder="Confirm Password" required formControlName="cfmPassword" name="cfmPasswords"></ion-input>
        </ion-item>
        <span *ngIf="!signupForm.controls.passwords.valid  && (submitAttempt || signupForm.controls.passwords.dirty)">
          <div ion-text class="warning-msg" *ngIf="!signupForm.controls.passwords.errors?.areEqual">
            * Passwords do not match.
          </div>
        </span>
      </div>
    </ion-list>
<!--     <button ion-button block round color="primary" (click)="signup();">Confirm</button>
    <div padding>
      <div text-center ion-text>Already have an account? </div>
      <button ion-button block round color="primary" (click)="loginPage();">Login Here</button>
    </div> -->
  </form>
 </div>


  <div [ngSwitch]="step">
    <form novalidate *ngSwitchCase="'step3'" [formGroup]="signupForm2">
      <ion-list no-lines>
        <div ion-text text-center padding-bottom>
          <h1>Personal Details</h1>
          <em>Step 3: Please fill in your personal details.</em>
        </div>

        <ion-item>
          <ion-label>Date of Birth</ion-label>
          <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="personalDetails.dob" name="dob" required formControlName="dob"></ion-datetime>
        </ion-item>

        <ion-item>
          <ion-input type="tel" [(ngModel)]="personalDetails.phoneNumber" name="phoneNumber" required formControlName="phoneNumber" placeholder="Phone Number"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Gender</ion-label>
          <ion-select [(ngModel)]="personalDetails.gender" name="gender" required formControlName="gender">
              <ion-option value="male">Male</ion-option>
              <ion-option value="female">Female</ion-option>
          </ion-select>
        </ion-item>

        <ion-item>
            <ion-input type="number" [(ngModel)]="personalDetails.age" name="age" required formControlName="age" placeholder="Age"></ion-input>
        </ion-item> 

        <ion-item>
          <ion-label>Race</ion-label>
          <ion-select [(ngModel)]="personalDetails.race" name="race" formControlName="race">
              <ion-option value="malay">Malay</ion-option>
              <ion-option value="chinese">Chinese</ion-option>
              <ion-option value="indian">Indian</ion-option>
              <ion-option value="other">Other</ion-option>
          </ion-select>
        </ion-item> 

        <ion-item>
          <ion-label>Nationality</ion-label>
          <ion-select [(ngModel)]="personalDetails.nationality" name="nationality" formControlName="nationality">
              <ion-option value="malaysian">Malaysian</ion-option>
              <ion-option value="foreigner">Foreigner</ion-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-input type="text" [(ngModel)]="personalDetails.address1" name="address1" required formControlName="address1" placeholder="Address line 1"></ion-input>
        </ion-item>

        <ion-item>
          <ion-input type="text" [(ngModel)]="personalDetails.address2" name="address2" formControlName="address2" placeholder="Address line 2"></ion-input>
        </ion-item>

        <ion-item>
          <ion-input type="text" [(ngModel)]="personalDetails.address3" name="address3" formControlName="address3" placeholder="Address line 3"></ion-input>
        </ion-item> 

        <ion-item>
          <ion-input type="text" [(ngModel)]="personalDetails.postcode" name="postcode" required formControlName="postcode" placeholder="Postcode"></ion-input>
        </ion-item>

        <ion-item>
          <ion-input type="text" [(ngModel)]="personalDetails.city" name="city" required formControlName="city" placeholder="City"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>State</ion-label>
            <ion-select [(ngModel)]="personalDetails.state" name="state" required formControlName="state">
                <ion-option value="johor">Johor</ion-option>
                <ion-option value="kedah">Kedah</ion-option>
                <ion-option value="kelantan">Kelantan</ion-option>
                <ion-option value="malacca">Malacca</ion-option>
                <ion-option value="negeriSembilan">Negeri Sembilan</ion-option>
                <ion-option value="pahang">Pahang</ion-option>
                <ion-option value="perak">Perak</ion-option>
                <ion-option value="pulauPinang">Pulau Pinang</ion-option>
                <ion-option value="sabah">Sabah</ion-option>
                <ion-option value="sarawak">Sarawak</ion-option>
                <ion-option value="selangor">Selangor</ion-option>
                <ion-option value="terengganu">Terengganu</ion-option>
                <ion-option value="other">Other</ion-option>
            </ion-select>
        </ion-item>
    </ion-list>
    </form>
  </div>

 
 <!--Step 4 -->
 <div [ngSwitch]="step">
    <form novalidate *ngSwitchCase="'step4'" [formGroup]="signupForm3" [hidden]="isUserSelected">
    <ion-list>
        <div ion-text text-center padding-bottom>
          <h1>Vendor Details</h1>
          <em>Step 3: Please fill in your company details.</em>
        </div>
        <ion-item>
            <ion-input type="text" [(ngModel)]="vendorDetails.companyName" name="companyName" required formControlName="companyName" placeholder="Company Name"></ion-input>
        </ion-item>
        <ion-item>
            <ion-textarea type="text" [(ngModel)]="vendorDetails.companyInfo" name="companyInfo" required formControlName="companyInfo" placeholder="Company Info"></ion-textarea>
        </ion-item>
        <ion-item>
            <ion-input type="text" [(ngModel)]="vendorDetails.SSMNumber" name="SSMNumber" required formControlName="SSMNumber" placeholder="SSM Number"></ion-input>
        </ion-item>
        <ion-item>
            <ion-input type="tel" [(ngModel)]="vendorDetails.officeNumber1" name="officeNumber1" required formControlName="officeNumber1" placeholder="Office Number 1"></ion-input>
        </ion-item>
        <ion-item>
            <ion-input type="tel" [(ngModel)]="vendorDetails.officeNumber2" name="officeNumber2" formControlName="officeNumber2" placeholder="Office Number 2"></ion-input>
        </ion-item>
        <ion-item>
            <ion-input type="text" [(ngModel)]="vendorDetails.cAddress1" name="cAddress1" required formControlName="cAddress1" placeholder="Company Address Line 1"></ion-input>
        </ion-item>
        <ion-item>
            <ion-input type="text" [(ngModel)]="vendorDetails.cAddress2" name="cAddress2" formControlName="cAddress2" placeholder="Company Address Line 2"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Opening Hours</ion-label>
            <ion-datetime [(ngModel)]="vendorDetails.openHours" name="openHours" displayFormat="hh:mm A" pickerFormat="hh mm A" formControlName="openHours"></ion-datetime>
        </ion-item>
        <ion-item>
            <ion-label>Closing Hours</ion-label>
              <ion-datetime [(ngModel)]="vendorDetails.closeHours" name="closeHours" displayFormat="hh:mm A" pickerFormat="hh mm A"  formControlName="closeHours"></ion-datetime>
        </ion-item>
    </ion-list>
    </form>
 </div>
</ion-content>

<!-- Footer -->
<ion-footer no-border text-center color="primary">
  <ion-toolbar primary>
      <ion-buttons left>
          <button *ngIf="step!='step1'" ion-button (click)="back()"> Back
          </button>
      </ion-buttons>
      <ion-buttons right>
          <button *ngIf="step!='step4'&&step!='step1'" ion-button (click)="next()"> Next
          </button>
      </ion-buttons>
  </ion-toolbar>
</ion-footer>
